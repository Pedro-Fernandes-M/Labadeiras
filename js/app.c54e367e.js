(function(){var e={376:function(e,t,n){"use strict";var a=n(751),r=n(564),o=n(641),l=n(278),u={__name:"App",setup(e){const t=(0,l.Pj)(),n=(0,o.EW)((()=>t.getters.getSocket));return t.dispatch("connectToWebSocket"),(0,o.wB)(n,(e=>{null==e&&t.dispatch("connectToWebSocket")})),(e,t)=>{const n=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(n)}}};const s=u;var i=s,c=n.p+"img/Tanque do Povo (1).922690da.png";const p={class:"container"};function v(e,t){const n=(0,o.g2)("RouterLink");return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[3]||(t[3]=(0,o.Lk)("div",{class:"container1"},[(0,o.Lk)("img",{class:"logo",src:c,alt:"Tanque do Pobo"})],-1)),(0,o.Lk)("div",p,[(0,o.bF)(n,{to:"/"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)("Diário")]))),_:1}),(0,o.bF)(n,{to:"/year",class:"item"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)(" Explorar ")]))),_:1}),(0,o.bF)(n,{to:"/previsions"},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)("Futuro")]))),_:1})])],64)}var d=n(262);const g={},m=(0,d.A)(g,[["render",v],["__scopeId","data-v-0571d8b3"]]);var h=m,b={__name:"PrevisionView",setup(e){return(e,t)=>((0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(h),t[0]||(t[0]=(0,o.Lk)("br",null,null,-1)),t[1]||(t[1]=(0,o.Lk)("div",null,"Future Update",-1))]))}};const f=b;var _=f,k={__name:"YearView",setup(e){return(e,t)=>((0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(h),t[0]||(t[0]=(0,o.Lk)("br",null,null,-1)),t[1]||(t[1]=(0,o.Lk)("div",null,"Future Update",-1))]))}};const y=k;var W=y,E=n(33);const w={class:"flex"},L={class:"container"},S={class:"container"};var C={__name:"ActiveCount",setup(e){const t=(0,l.Pj)(),n=(0,o.EW)((()=>-1==t.getters.getCount?"--":t.getters.getCount));let a=0;const r=(0,o.EW)((()=>{const e=t.getters.getDaily;return null==e?"--":(e.forEach((e=>{a+=parseInt(e.count)})),(a/e.length).toFixed(2))})),u=new Date,s=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],i=`${u.getDate()} de ${s[u.getMonth()]}`,c=(0,o.EW)((()=>{const e=t.getters.getDaily;if(null==e)return"--";const n=e.filter((e=>e.count>0)).length;return(n/e.length*100).toFixed(0)+"%"})),p=(0,o.EW)((()=>"green"===t.getters.getBg?(v(),"bg-green"):"red"===t.getters.getBg?(v(),"bg-red"):null));function v(){setTimeout((()=>{t.commit("setBg","bg")}),600)}return(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{class:"container1"},[(0,o.Lk)("h2",null,(0,E.v_)(i))]),(0,o.Lk)("div",w,[(0,o.Lk)("div",{class:(0,E.C4)(["container",[p.value]])},[(0,o.Lk)("h3",null,[(0,o.eW)((0,E.v_)(n.value)+" ",1),t[0]||(t[0]=(0,o.Lk)("br",null,null,-1)),t[1]||(t[1]=(0,o.eW)(" Ativos "))]),t[2]||(t[2]=(0,o.Lk)("div",{class:"line"},null,-1))],2),(0,o.Lk)("div",L,[(0,o.Lk)("h3",null,[(0,o.eW)((0,E.v_)("NaN"==e.percentageg?"--":c.value)+" ",1),t[3]||(t[3]=(0,o.Lk)("br",null,null,-1)),t[4]||(t[4]=(0,o.eW)(" Ocupação "))]),t[5]||(t[5]=(0,o.Lk)("div",{class:"line"},null,-1))]),(0,o.Lk)("div",S,[(0,o.Lk)("h3",null,[(0,o.eW)((0,E.v_)("NaN"==r.value?"--":r.value)+" ",1),t[6]||(t[6]=(0,o.Lk)("br",null,null,-1)),t[7]||(t[7]=(0,o.eW)(" Média "))]),t[8]||(t[8]=(0,o.Lk)("div",{class:"line"},null,-1))])])],64))}};const x=(0,d.A)(C,[["__scopeId","data-v-0d955f9a"]]);var O=x,F=n(953);const j={class:"warning"};var P={__name:"WarningPop",props:["nome"],setup(e){const t=e;return(e,n)=>((0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",j,(0,E.v_)(t.nome)+" indisponível! ",1)]))}};const T=(0,d.A)(P,[["__scopeId","data-v-76efdd9e"]]);var A=T;const D={key:0,class:"container"};var $={__name:"CountChart",setup(e){const t=(0,l.Pj)(),n=(0,o.EW)((()=>t.getters.getDaily)),a=(0,o.EW)((()=>{const e=[];return n.value.forEach((t=>{e.push(t.hour)})),e})),r=(0,o.EW)((()=>{const e=[];return n.value.forEach((t=>{e.push(t.count)})),e})),u=(0,F.KR)({chart:{toolbar:{show:!1}},title:{text:"Contagem",align:"center",style:{fontSize:"18px",fontWeight:"bold"}},xaxis:{categories:a}}),s=(0,F.KR)([{name:"count",data:r}]);return(e,t)=>{const a=(0,o.g2)("apexchart");return null!=n.value&&n.value.length>1?((0,o.uX)(),(0,o.CE)("div",D,[(0,o.bF)(a,{width:"100%",height:"200%",type:"bar",options:u.value,series:s.value},null,8,["options","series"])])):((0,o.uX)(),(0,o.Wv)(A,{key:1,nome:"Contagem"}))}}};const M=(0,d.A)($,[["__scopeId","data-v-597318d0"]]);var X=M;const V={key:0};var I={__name:"MultiChart",setup(e){const t=(0,l.Pj)(),n=(0,o.EW)((()=>t.getters.getWeather)),r=(0,F.KR)("Temperatura"),u=(0,o.EW)((()=>{const e=n.value.daily.time,t=Object.values(e),a=[];return t.forEach((e=>{const[,t,n]=e.split("-");a.push(`${n}-${t}`)})),a})),s=(0,F.KR)({chart:{toolbar:{show:!1},zoom:{enabled:!1}},title:{text:`${r.value}`,align:"center",style:{fontSize:"18px",fontWeight:"bold"}},xaxis:{categories:u}}),i=(0,o.EW)((()=>{if("Temperatura"===r.value){const e=n.value.daily.temperature_2m_max;return Object.values(e)}if("Precipitação"===r.value){const e=n.value.daily.precipitation_hours;return Object.values(e)}if("Chuva/Vento"===r.value){const e=n.value.daily.rain_sum;return Object.values(e)}if("Evaporação"===r.value){const e=n.value.daily.et0_fao_evapotranspiration;return Object.values(e)}return null})),c=(0,o.EW)((()=>{if("Temperatura"===r.value){const e=n.value.daily.temperature_2m_min;return Object.values(e)}if("Precipitação"===r.value){const e=n.value.daily.precipitation_probability_max;return Object.values(e)}if("Chuva/Vento"===r.value){const e=n.value.daily.wind_speed_10m_max;return Object.values(e)}return[]})),p=(0,o.EW)((()=>"Temperatura"===r.value?(d(),"Temperatura_Max(°C)"):"Precipitação"===r.value?(d(),"Precipitação_Horas"):"Chuva/Vento"===r.value?(d(),"Chuva_Sum(mm)"):"Evaporação"===r.value?(d(),"Evapotranspiração(mm)"):null)),v=(0,o.EW)((()=>"Temperatura"===r.value?"Temperatura_Min(°C)":"Precipitação"===r.value?"Precipitação_Prob_Máx(%)":"Chuva/Vento"===r.value?"Velocidade_Vento_Max(KM/H)":""));function d(){"Temperatura"===r.value||"Precipitação"===r.value||"Chuva/Vento"===r.value?g.value=[{name:p,data:i},{name:v,data:c}]:g.value=[{name:p,data:i}]}const g=(0,F.KR)([{name:p,data:i},{name:v,data:c}]);return(e,t)=>{const l=(0,o.g2)("apexchart");return(0,o.uX)(),(0,o.CE)("div",null,[null!=n.value&&null!=g.value?((0,o.uX)(),(0,o.CE)("div",V,[(0,o.bF)(l,{width:"100%",height:"200%",type:"line",options:s.value,series:g.value},null,8,["options","series"])])):((0,o.uX)(),(0,o.Wv)(A,{key:1,nome:r.value},null,8,["nome"])),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),class:"options"},t[1]||(t[1]=[(0,o.Lk)("option",null,"Temperatura",-1),(0,o.Lk)("option",null,"Precipitação",-1),(0,o.Lk)("option",null,"Chuva/Vento",-1),(0,o.Lk)("option",null,"Evaporação",-1)]),512),[[a.u1,r.value]])])}}};const R=(0,d.A)(I,[["__scopeId","data-v-69abbe82"]]);var B=R;const U={key:0,class:"flex"},K={class:"container"},N={class:"container"};var z={__name:"StatesSpec",setup(e){const t=(0,l.Pj)(),n=(0,o.EW)((()=>t.getters.getWeather.current.apparent_temperature)),a=(0,o.EW)((()=>t.getters.getWeather.current.relative_humidity_2m));return(e,r)=>((0,o.uX)(),(0,o.CE)("div",null,[null!=(0,F.R1)(t).getters.getWeather?((0,o.uX)(),(0,o.CE)("div",U,[(0,o.Lk)("div",K,[(0,o.Lk)("h3",null,[(0,o.eW)((0,E.v_)(n.value)+"°C ",1),r[0]||(r[0]=(0,o.Lk)("br",null,null,-1)),r[1]||(r[1]=(0,o.eW)(" Temperatura "))]),r[2]||(r[2]=(0,o.Lk)("div",{class:"line"},null,-1))]),(0,o.Lk)("div",N,[(0,o.Lk)("h3",null,[(0,o.eW)((0,E.v_)(a.value)+"% ",1),r[3]||(r[3]=(0,o.Lk)("br",null,null,-1)),r[4]||(r[4]=(0,o.eW)(" Umidade "))]),r[5]||(r[5]=(0,o.Lk)("div",{class:"line"},null,-1))])])):(0,o.Q3)("",!0)]))}};const H=(0,d.A)(z,[["__scopeId","data-v-b2fbff86"]]);var J=H,q={__name:"DayView",setup(e){const t=(0,l.Pj)(),n=new Date,a=new Date(n);a.setDate(n.getDate()-5);const r=n.toISOString().split("T")[0],u=a.toISOString().split("T")[0],[,s,i]=r.split("-"),c=(0,o.EW)((()=>t.getters.getDaily));null==c.value&&t.dispatch("fetch",`daily?day=${i}&month=${s}`);const p=(0,o.EW)((()=>t.getters.getWeather));return null==p.value&&t.dispatch("weather",[`${u}`,`${r}`]),(e,t)=>((0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(h),(0,o.bF)(O),(0,o.bF)(J),(0,o.bF)(X),(0,o.bF)(B)]))}};const Y=(0,d.A)(q,[["__scopeId","data-v-c35d613e"]]);var Q=Y,G=n(220);const Z=[{path:"/",name:"day",component:Q},{path:"/year",name:"year",component:W},{path:"/previsions",name:"previsions",component:_}],ee=(0,G.aE)({history:(0,G.LA)("/Labadeiras/"),routes:Z});var te=ee,ne=n(396),ae=n.n(ne),re=(0,l.y$)({state:{count:-1,socket:null,yearly:null,daily:null,weather:null,bg:null},getters:{getCount(e){return e.count},getYearly(e){return e.yearly},getDaily(e){return e.daily},getWeather(e){return e.weather},getBg(e){return e.bg},getSocket(e){return e.socket}},mutations:{setCount(e,t){e.count=t},setSocket(e,t){e.socket=t},setyearly(e,t){e.yearly=t},setdaily(e,t){e.daily=t},setWeather(e,t){e.weather=t},setBg(e,t){e.bg=t}},actions:{async fetchWebSocketURL(){try{const e=await fetch("https://ghoul-optimal-bird.ngrok-free.app/websocket-url?token=2024",{headers:{"ngrok-skip-browser-warning":"true"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.text()}catch(e){console.error("Error fetching WebSocket URL:",e)}},async connectToWebSocket({commit:e,state:t,dispatch:n}){const a=await n("fetchWebSocketURL");if(console.log(a),!a)throw new Error("WebSocket URL is undefined or empty");if(t.socket)console.log("WebSocket já está conectado.");else try{const n=new WebSocket(a);n.onopen=()=>{console.log("Conexão WebSocket estabelecida!")},n.onmessage=n=>{try{const a=JSON.parse(n.data);void 0!==a.person_count?(console.log("Atualização de person_count recebida:",a.person_count),t.count<a.person_count?e("setBg","green"):e("setBg","red"),e("setCount",a.person_count)):console.warn("Mensagem WebSocket recebida não contém person_count:",a)}catch(a){console.error("Erro ao processar mensagem WebSocket:",a)}},n.onclose=()=>{console.log("Conexão WebSocket encerrada."),e("setSocket",null)},n.onerror=e=>{console.error("Erro no WebSocket:",e)},e("setSocket",n)}catch(r){console.error("Erro ao conectar ao WebSocket:",r)}},disconnectWebSocket({commit:e,state:t}){t.socket?(t.socket.close(),e("setSocket",null),console.log("Conexão WebSocket encerrada manualmente.")):console.log("Nenhuma conexão WebSocket ativa para encerrar.")},async fetch({commit:e},t){const n=new Date,a=n.getFullYear().toString()+(n.getMonth()+1).toString().padStart(2,"0")+n.getDate().toString().padStart(2,"0"),r="labadeiras"+a;try{const n=await fetch("https://ghoul-optimal-bird.ngrok-free.app/"+t,{headers:{"ngrok-skip-browser-warning":"true"}}),a=await n.json(),o=new Promise(((e,t)=>{(async()=>{try{if(!r||!a||!a.data)return t(console.error("Missing required fields in the data."));const[o,l]=a.data.split(":");if(!o||!l)return t(new Error("Invalid base64 string format"));let u,s;try{u=ae().enc.Base64.parse(o),s=ae().enc.Base64.parse(l)}catch(n){return t(new Error("Failed to decode base64: "+n.message))}const i=ae().SHA256(r).toString(ae().enc.Hex),c=ae().AES.decrypt({ciphertext:s},ae().enc.Hex.parse(i),{iv:u}),p=JSON.parse(c.toString(ae().enc.Utf8));e(p)}catch(o){t(o)}})()}));o.then((n=>{let a=t.replace("?",",").split(",");e(`set${a[0]}`,n),console.log(`${a[0]}:`,n)}))}catch(o){console.error("Error fetching data:",o)}},async weather({commit:e},t){const n=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=41.625&longitude=-8.4375&elevation=35.4&current=relative_humidity_2m,apparent_temperature&daily=temperature_2m_max,temperature_2m_min,precipitation_sum,rain_sum,showers_sum,wind_speed_10m_max,precipitation_hours,precipitation_probability_max,sunrise,sunset,et0_fao_evapotranspiration&timezone=Europe%2FLondon&start_date=${t[0]}&end_date=${t[1]}`),a=await n.json();a&&e("setWeather",a)}},modules:{}});(0,a.Ef)(i).use(re).use(te).use(r.A).mount("#app")},477:function(){}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,a,r,o){if(!a){var l=1/0;for(c=0;c<e.length;c++){a=e[c][0],r=e[c][1],o=e[c][2];for(var u=!0,s=0;s<a.length;s++)(!1&o||l>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[s])}))?a.splice(s--,1):(u=!1,o<l&&(l=o));if(u){e.splice(c--,1);var i=r();void 0!==i&&(t=i)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[a,r,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/Labadeiras/"}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,o,l=a[0],u=a[1],s=a[2],i=0;if(l.some((function(t){return 0!==e[t]}))){for(r in u)n.o(u,r)&&(n.m[r]=u[r]);if(s)var c=s(n)}for(t&&t(a);i<l.length;i++)o=l[i],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},a=self["webpackChunkdetection"]=self["webpackChunkdetection"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(376)}));a=n.O(a)})();
//# sourceMappingURL=app.c54e367e.js.map